<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fit-O-Fine Knowledge Base - FieldSet Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        h1 {
            font-size: 2.2em;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        h2 {
            font-size: 1.8em;
            color: #34495e;
            border-bottom: 2px solid #e67e22;
            padding-bottom: 5px;
            margin-bottom: 20px;
        }

        h3, h4 {
            font-size: 1.4em;
            color: #2980b9;
        }

        p {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        strong {
            color: #e74c3c;
        }

        pre {
            background-color: #ecf0f1;
            border-left: 4px solid #e67e22;
            padding: 15px;
            margin-bottom: 30px;
            font-size: 1.1em;
            border-radius: 5px;
            overflow-x: auto;
        }

        code {
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 1em;
        }

        a {
            color: #3498db;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        ul {
            list-style-type: square;
            margin-left: 20px;
        }

        /* Add hover effects for headers */
        h2:hover, h3:hover, h4:hover {
            color: #e67e22;
            transition: color 0.3s ease-in-out;
        }

        /* Styling for the code examples */
        pre::before {
            content: "Code:";
            display: block;
            font-weight: bold;
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        /* Container for centering content */
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 20px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Fit-O-Fine Knowledge Base Explanation</h1>

    <h2>FieldSet Definition</h2>
    <p>FieldSet is an object of key-value pairs of test fields and test names. In other words, FieldSet is an object of subfields of a test associated with all of its parent test names.</p>

    <h3>Example:</h3>

    <h4>1. Single Test</h4>
    <p>For an arbitrary test named <strong>X</strong>. If the <strong>X</strong> test contains two fields, i.e., <strong>a</strong> and <strong>b</strong>, then the FieldSet must contain two key-value pairs. One is for field <strong>a</strong> and another is for field <strong>b</strong>, and <strong>X</strong> must be associated as a value with each of those keys.</p>

    <pre>
FieldSet = {
    a: ['X'],
    b: ['X'],
}
    </pre>

    <h4>2. Multiple Test</h4>
    <p>For two arbitrary tests named <strong>X</strong> and <strong>Y</strong>, if the <strong>X</strong> test contains two fields, i.e., <strong>a</strong> and <strong>b</strong>, and the <strong>Y</strong> test contains two fields, i.e., <strong>a</strong> and <strong>c</strong>, then the FieldSet must contain three key-value pairs, i.e., all the unique field names.</p>

    <pre>
FieldSet = {
    a: ['X', 'Y'],
    b: ['X'],
    c: ['Y']
}
    </pre>

    <h2>Why this FieldSet is needed in Fit-O-Fine</h2>
    <p>To ensure a constant time search in Fit-O-Fine, all fields of the tests are added to the FieldSet. So whenever a query is generated for a test field report, it will be processed based on the collection that contains the parent test names. The collection is then directly passed to the MongoDB query for the data retrieval process.</p>

    <h3>Example:</h3>
    <pre>
await Patient.find({ test_name: { $in: FieldSet[testFieldName] }})
    </pre>
    <p>The query will return an array of all Patient documents that have the <strong>test_name</strong> field equal to any of the values inside the <strong>FieldSet[testFieldName]</strong> array.</p>

    <h2>Fit-O-Fine FieldSet</h2>
    <pre>
FieldSet = {
    hemoglobin: ['Hemoglobin', 'CBC'],
    cbc: ['CBC'],
    rbc: ['RBC', 'CBC'],
    hct: ['CBC'],
    mcv: ['CBC'],
    mch: ['CBC'],
    mchc: ['CBC'],
    rdw_cv: ['CBC'],
    tlc: ['CBC'],
    t3: ['Thyroid'],
    t4: ['Thyroid'],
    thyroid_stimulating_hormone: ['Thyroid'],
    thyroid: ['Thyroid'],
}
    </pre>
</div>

</body>
</html>
